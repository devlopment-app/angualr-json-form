<div class="design-canvas" 
     cdkDropList
     #designCanvas="cdkDropList"
     [cdkDropListData]="formFields"
     [cdkDropListConnectedTo]="['control-panel']"
     (cdkDropListDropped)="onDrop($event)">
  
  <div class="form-field" 
       *ngFor="let field of formFields; let i = index" 
       [class.selected]="field === selectedField" 
       cdkDrag
       [cdkDragData]="field"
       (click)="selectField(field)">
    
    <!-- CDK Drag Preview -->
    <div *cdkDragPreview class="form-field-preview">
      {{field.label || 'Untitled Field'}}
    </div>
    
    <!-- Field Content -->
    <div class="field-preview">
      <div class="field-header">
        <span class="field-label">{{field.label || 'Untitled Field'}}</span>
        <button class="remove-button" (click)="removeField(i); $event.stopPropagation()">Ã—</button>
      </div>

      <!-- Field preview based on type -->
      <div class="field-content" [ngSwitch]="field.type">
        <!-- Text, Email, Number inputs -->
        <input *ngSwitchCase="'text'" type="text" [placeholder]="field.placeholder || ''" disabled>
        <input *ngSwitchCase="'email'" type="email" [placeholder]="field.placeholder || ''" disabled>
        <input *ngSwitchCase="'number'" type="number" [placeholder]="field.placeholder || ''" disabled>
        
        <!-- Select input -->
        <select *ngSwitchCase="'select'" disabled>
          <option *ngFor="let opt of field.eoptions" [value]="opt.value">
            {{opt.label}}
          </option>
        </select>
        
        <!-- Textarea -->
        <textarea *ngSwitchCase="'textarea'" [placeholder]="field.placeholder || ''" disabled></textarea>
        
        <!-- Default case -->
        <div *ngSwitchDefault class="preview-placeholder">
          {{field.type}} field
        </div>
      </div>

      <div class="field-hint" *ngIf="field.hint">
        {{field.hint}}
      </div>
    </div>
  </div>

  <!-- Empty state -->
  <div class="empty-canvas" *ngIf="formFields.length === 0">
    Drag and drop fields here to build your form
  </div>
</div>